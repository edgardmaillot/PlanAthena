@startuml
' --- Configuration ---
!theme toy
skinparam componentStyle uml2
skinparam linetype ortho
skinparam ranksep 60
skinparam nodesep 60
skinparam shadowing false
title Contrat de Service API - PlanAthena.Core v1.0\nsize:12<i>Documentation complète des DTOs d'entrée et de sortie</i></size>
package "Point d'Entrée" {
class "PlanAthenaCoreFacade" as Facade {
+ ProcessChantierAsync(input: ChantierSetupInputDto): Task<ProcessChantierResultDto>
}
}
package "Contrat d'Entrée (Input DTOs)" <<Rectangle>> {
class ChantierSetupInputDto {
+ ChantierId: string
+ Description: string
+ DateDebutSouhaitee: DateTime?
+ DateFinSouhaitee: DateTime?
--
+ CalendrierTravail: CalendrierTravailDefinitionDto
+ Blocs: IReadOnlyList<BlocTravailDto>
+ Taches: IReadOnlyList<TacheDto>
+ Lots: IReadOnlyList<LotTravauxDto>
+ Ouvriers: IReadOnlyList<OuvrierDto>
+ Metiers: IReadOnlyList<MetierDto>
+ OptimizationConfig: OptimizationConfigDto?
}
class CalendrierTravailDefinitionDto{
+ JoursOuvres: IReadOnlyList<DayOfWeek>
+ HeureDebutJournee: int
+ HeuresTravailEffectifParJour: int
}
class TacheDto {
+ TacheId: string
+ TacheNom: string
+ HeuresHommeEstimees: double
+ MetierId: string
+ Dependencies: IReadOnlyList<string>
+ BlocId: string
+ TypeActivite: TypeActivite
}
class OuvrierDto {
+ OuvrierId: string
+ Nom: string
+ Prenom: string
+ CoutJournalier: long
+ Competences: IReadOnlyList<CompetenceDto>
}
class OptimizationConfigDto {
+ TypeDeSortie: string
+ PenaliteChangementOuvrierPourcentage: decimal
+ CoutIndirectJournalierAbsolu: long
+ DureeCalculMaxMinutes: int
}
}
package "Contrat de Sortie (Output DTOs)" <<Cloud>> {
class "ProcessChantierResultDto" as ProcessResult <<(M,Lime) Modified>> {
+ ChantierId: string
+ Etat: EtatTraitementInput
+ Messages: IReadOnlyList<MessageValidationDto>
--
+ OptimisationResultat: PlanningOptimizationResultDto?
..
+ AnalyseStatiqueResultat: AnalyseRessourcesResultatDto?>
}
note right of ProcessResult
<b>Modification Majeure :</b>
Vérifier les données sorties par la DLL
et le retour de l'analyse rapide.
end note
class PlanningOptimizationResultDto {
+ ChantierId: string
+ Status: OptimizationStatus
+ CoutTotalEstime: long?
+ CoutTotalRhEstime: long?
+ CoutTotalIndirectEstime: long?
+ DureeTotaleEnSlots: long?
+ Affectations: IReadOnlyList<AffectationDto>
}
class AffectationDto {
+ TacheId: string
+ TacheNom: string
+ OuvrierId: string
+ OuvrierNom: string
+ BlocId: string
+ DateDebut: DateTime
+ DureeHeures: double
+ DateFin: DateTime
+ TypeActivite: TypeActivite
}
class MessageValidationDto {
+ Type: TypeMessageValidation
+ CodeMessage: string
+ Message: string
+ ElementId: string?
}
}
' --- Relations de Contrat ---
Facade .up.> ChantierSetupInputDto : "<<accepte>>"
Facade .down.> ProcessResult : "<<retourne>>"
ChantierSetupInputDto "1" *-down- "1" CalendrierTravailDefinitionDto
ChantierSetupInputDto "1" *-down- "0..1" OptimizationConfigDto
ChantierSetupInputDto "1" -down- "0.." TacheDto
ChantierSetupInputDto "1" -down- "0.." OuvrierDto
ProcessResult "1" *-down- "0..1" PlanningOptimizationResultDto
PlanningOptimizationResultDto "1" -down- "0.." AffectationDto
ProcessResult "1" -down- "0.." MessageValidationDto
@enduml